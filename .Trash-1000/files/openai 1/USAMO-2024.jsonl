{"id": "usamo-2024-q1", "solution": "Let \\( n! = p_1^{a_1} p_2^{a_2} \\cdots p_m^{a_m} \\) be the prime factorization of \\( n! \\), where \\( p_1 < p_2 < \\dots < p_m \\) are prime numbers and \\( a_1, a_2, \\dots, a_m \\) are positive integers. \n\nThe divisors of \\( n! \\) are precisely the numbers of the form \\( p_1^{b_1} p_2^{b_2} \\cdots p_m^{b_m} \\), where \\( 0 \\leq b_i \\leq a_i \\) for each \\( i \\). \n\nLet \\( d_i = p_1^{b_{i1}} p_2^{b_{i2}} \\cdots p_m^{b_{im}} \\) be the \\( i \\)-th divisor of \\( n! \\) in the list. Then, we have \\( 0 \\leq b_{i1} \\leq a_1, 0 \\leq b_{i2} \\leq a_2, \\dots, 0 \\leq b_{im} \\leq a_m \\) for each \\( i \\).\n\nThe condition \\( d_2 - d_1 \\leq d_3 - d_2 \\leq \\dots \\leq d_k - d_{k-1} \\) can be rewritten as\n\\[\np_1^{b_{21}} p_2^{b_{22}} \\cdots p_m^{b_{2m}} - p_1^{b_{11}} p_2^{b_{12}} \\cdots p_m^{b_{1m}} \\leq p_1^{b_{31}} p_2^{b_{32}} \\cdots p_m^{b_{3m}} - p_1^{b_{21}} p_2^{b_{22}} \\cdots p_m^{b_{2m}} \\leq \\dots \\leq p_1^{b_{k1}} p_2^{b_{k2}} \\cdots p_m^{b_{km}} - p_1^{b_{(k-1)1}} p_2^{b_{(k-1)2}} \\cdots p_m^{b_{(k-1)m}}.\n\\]\n\nThis simplifies to\n\\[\np_1^{b_{21}} p_2^{b_{22}} \\cdots p_m^{b_{2m}} (p_1^{b_{22}-b_{12}} p_2^{b_{22}-b_{12}} \\cdots p_m^{b_{2m}-b_{1m}} - 1) \\leq p_1^{b_{31}} p_2^{b_{32}} \\cdots p_m^{b_{3m}} (p_1^{b_{32}-b_{22}} p_2^{b_{32}-b_{22}} \\cdots p_m^{b_{3m}-b_{2m}} - 1) \\leq \\dots \\leq p_1^{b_{k1}} p_2^{b_{k2}} \\cdots p_m^{b_{km}} (p_1^{b_{k2}-b_{(k-1)2}} p_2^{b_{k2}-b_{(k-1)2}} \\cdots p_m^{b_{km}-b_{(k-1)m}} - 1).\n\\]\n\nSince \\( p_1 < p_2 < \\dots < p_m \\), the term \\( p_1^{b_{i1}} p_2^{b_{i2}} \\cdots p_m^{b_{im}} \\) is strictly increasing as \\( i \\) increases. Therefore, in order for the above inequalities to hold, it must be the case that for each \\( i \\), the term \\( p_1^{b_{i2}-b_{(i-1)2}} p_2^{b_{i2}-b_{(i-1)2}} \\cdots p_m^{b_{im}-b_{(i-1)m}} - 1 \\) is non-decreasing as \\( i \\) increases.\n\nThis implies that for each \\( i \\), we must have \\( b_{i2} - b_{(i-1)2} \\geq 0, b_{i3} - b_{(i-1)3} \\geq 0, \\dots, b_{im} - b_{(i-1)m} \\geq 0 \\). In other words, for each prime \\( p_j \\), the exponent of \\( p_j \\) in the prime factorization of the divisors must be"}
{"id": "usamo-2024-q2", "solution": "Let $n$ be the smallest possible number of elements which are in at least $50$ sets. We will show that $n=100$.\n\nConsider the case where $n=99$. Let $A$ be the set of elements that are in at least $50$ sets. Since $|A|=99$, there exists a set $S_i$ such that $|S_i \\cap A| \\geq 50$. Let $T = \\{S_i\\}$. Then, $|T|=1$ and $|S_i \\cap A| \\geq 50$, which contradicts the given condition that the size of the intersection of the sets in $T$ is a multiple of $|T|$.\n\nTherefore, $n \\geq 100$. To show that $n=100$ is achievable, consider the following construction: Let $S_i = \\{i, i+1, i+2, \\ldots, i+99\\}$ for $i=1,2,\\ldots,100$. It is easy to see that the intersection of any non-empty subset of $\\{S_1, S_2, \\ldots, S_{100}\\}$ has size $100$ and is a multiple of the size of the subset. Thus, the smallest possible number of elements which are in at least $50$ sets is $\\boxed{100}$."}
{"id": "usamo-2024-q3", "solution": "Let $A$ be the area of the $n$-gon. Since the $n$-gon can be divided into $n-2$ triangles, each color must have a total area of $A/(n-2)$. \n\nLet $x_i$ be the area of the $i$-th triangle, and let $c_i$ be the color of the $i$-th triangle. We have the following system of equations:\n\\begin{align*}\n\\sum_{i=1}^{n-2} x_i &= A, \\\\\n\\sum_{i=1}^{n-2} x_i &= (n-2)\\cdot \\frac{A}{n-2} = A, \\\\\n\\sum_{i=1}^{n-2} x_i &= m\\cdot \\frac{A}{m} = A.\n\\end{align*}\n\nThus, the total area of the $n$-gon must be $A = m\\cdot \\frac{A}{m} = n\\cdot \\frac{A}{n-2}$. This implies that $m = n-2$.\n\nTherefore, such a triangulation and coloring is possible if and only if $m = n-2$."}
{"id": "usamo-2024-q4", "solution": "Let $r$ be the number of red beads and $b$ be the number of blue beads in the necklace. Since there are $mn$ beads in total, we have $r+b=mn$.\n\nGiven that each block of $n$ consecutive beads has a distinct number of red beads, we can consider the number of red beads in each block. Since there are $m$ blocks, there are $m$ distinct numbers of red beads. The smallest possible number of red beads in a block is $0$, and the largest possible number of red beads in a block is $n-1$.\n\nTherefore, the $m$ distinct numbers of red beads in the blocks are $0, 1, 2, \\ldots, n-1$. The sum of these $m$ distinct numbers must be less than or equal to the total number of red beads $r$ in the necklace. The sum of the first $n$ positive integers is $\\frac{n(n-1)}{2}$, so we have:\n$$\\frac{n(n-1)}{2} \\leq r$$\n\nSince $r+b=mn$, we have $r=mn-b$. Substituting this into the inequality above, we get:\n$$\\frac{n(n-1)}{2} \\leq mn-b$$\n$$n(n-1) \\leq 2mn-2b$$\n$$n^2-n \\leq 2mn-2b$$\n$$n^2-(2m)n+n \\leq -2b$$\n\nSince $n$ is a positive integer, the discriminant of this quadratic inequality must be non-positive:\n$$(2m)^2-4(1)(1) \\geq 0$$\n$$4m^2-4 \\geq 0$$\n$$m^2 \\geq 1$$\n$$m \\geq 1$$\n\nTherefore, the possible values of $m$ are $1, 2, 3, \\ldots$.\n\nNow, let's consider the possible values of $n$ for each $m$.\n\nFor $m=1$, the inequality simplifies to $n \\leq -2b$, which is not possible since $n$ is a positive integer. Therefore, $m=1$ is not a valid solution.\n\nFor $m=2$, the inequality simplifies to $n^2-4n+1 \\leq -2b$. Since $n$ is a positive integer, we have $n=1$ as the only possible solution. Checking, we see that $n=1$ satisfies the conditions.\n\nFor $m=3$, the inequality simplifies to $n^2-6n+1 \\leq -2b$. The only possible solution for $n$ is $n=1$. Checking, we see that $n=1$ satisfies the conditions.\n\nFor $m=4$, the inequality simplifies to $n^2-8n+1 \\leq -2b$. The only possible solution for $n$ is $n=1$. Checking, we see that $n=1$ satisfies the conditions.\n\nFor $m=5$, the inequality simplifies to $n^2-10n+1 \\leq -2b$. The only possible solution for $n$ is $n=1$. Checking, we see that $n=1$ satisfies the conditions.\n\nContinuing this pattern, we see that the only valid solution is $(m,n) = (2,1)$.\n\nTherefore, the only possible values of the ordered pair $(m, n)$ are $(2, 1)$."}
{"id": "usamo-2024-q5", "solution": "Let \\( \\angle BAC = \\alpha \\) and \\( \\angle ACB = \\beta \\). Since \\( \\angle DAC = \\angle ACB = \\beta \\), we have \\( \\angle DAB = \\angle DAC - \\angle BAC = \\beta - \\alpha \\). Similarly, since \\( \\angle BDC = 90^\\circ + \\angle BAC = 90^\\circ + \\alpha \\), we have \\( \\angle BDE = \\angle BDC - \\angle EDC = 90^\\circ + \\alpha - \\beta \\).\n\nSince \\( AE = EC \\), we have \\( \\angle EAC = \\angle ECA = \\frac{1}{2} \\angle ACE = \\frac{1}{2} \\beta \\). Therefore, \\( \\angle EAB = \\angle EAC - \\angle BAC = \\frac{1}{2} \\beta - \\alpha \\).\n\nNow, consider the quadrilateral \\( ABDE \\). We have \\( \\angle ABE = \\angle ABD + \\angle DBE = \\angle DAB + \\angle BDE = (\\beta - \\alpha) + (90^\\circ + \\alpha - \\beta) = 90^\\circ \\). This implies that \\( AB \\) is perpendicular to \\( DE \\) at point \\( B \\).\n\nLet \\( O \\) be the circumcenter of triangle \\( BEM \\). Since \\( M \\) is the midpoint of \\( BC \\), we have \\( OM \\perp BC \\), which implies that \\( OM \\parallel AB \\). Since \\( AB \\perp DE \\) at \\( B \\), we have \\( OM \\perp DE \\). Therefore, \\( O \\) lies on the perpendicular bisector of \\( DE \\), which means that \\( AB \\) is tangent to the circumcircle of triangle \\( BEM \\) at point \\( B \\)."}
{"id": "usamo-2024-q6", "solution": "Let $S = \\{1, 2, \\dots, n\\}$ and let $m = |S| = n$. Let $f(A) = |A|$ denote the size of a set $A$. We will show that the largest real number $c$ such that the inequality holds is $\\frac{\\ell^2}{\\ell^2 + (m-\\ell)^2}$.\n\nFirst, we will prove that the inequality holds for $c = \\frac{\\ell^2}{\\ell^2 + (m-\\ell)^2}$. Let $k$ be a positive integer, $x_1, x_2, \\dots, x_k$ be nonnegative real numbers, and $A_1, A_2, \\dots, A_k$ be $\\ell$-large collections of subsets of $S$. We have\n\\begin{align*}\n\\sum_{i=1}^k\\sum_{j=1}^k x_ix_j \\frac{|A_i\\cap A_j|^2}{|A_i|\\cdot|A_j|} &= \\sum_{i=1}^k\\sum_{j=1}^k x_ix_j \\frac{|A_i\\cap A_j|^2}{f(A_i)f(A_j)} \\\\\n&\\ge \\frac{\\left(\\sum_{i=1}^k x_i|A_i\\cap A_i|\\right)^2}{\\sum_{i=1}^k x_if(A_i)\\cdot \\sum_{j=1}^k x_jf(A_j)} \\quad \\text{(Cauchy-Schwarz inequality)} \\\\\n&= \\frac{\\left(\\sum_{i=1}^k x_if(A_i)\\right)^2}{\\left(\\sum_{i=1}^k x_if(A_i)\\right)^2} \\\\\n&= \\frac{\\left(\\sum_{i=1}^k x_if(A_i)\\right)^2}{\\left(\\sum_{i=1}^k x_i\\right)^2} \\\\\n&\\ge \\frac{\\ell^2}{\\ell^2 + (m-\\ell)^2} \\left(\\sum_{i=1}^k x_i\\right)^2.\n\\end{align*}\nTherefore, the inequality holds for $c = \\frac{\\ell^2}{\\ell^2 + (m-\\ell)^2}$.\n\nNext, we will show that the inequality does not hold for $c > \\frac{\\ell^2}{\\ell^2 + (m-\\ell)^2}$. Consider $k = 2$, $x_1 = x_2 = 1$, and $A_1 = \\{1, 2, \\dots, \\ell\\}$, $A_2 = \\{1, \\ell+1, \\ell+2, \\dots, m\\}$. We have\n\\begin{align*}\n\\sum_{i=1}^k\\sum_{j=1}^k x_ix_j \\frac{|A_i\\cap A_j|^2}{|A_i|\\cdot|A_j|} &= \\sum_{i=1}^k\\sum_{j=1}^k x_ix_j \\frac{|A_i\\cap A_j|^2}{f(A_i)f(A_j)} \\\\\n&= \\frac{|A_1\\cap A_1|^2}{f(A_1)^2} + \\frac{|A_1\\cap A_2|^2}{f(A_1)f(A_2)} + \\frac{|A_2\\cap A_1|^2}{f(A_2)f(A_1)} + \\frac{|A_2\\cap A_2|^2}{f(A_2)^2} \\\\\n&= \\frac{\\ell^2}{\\ell^2} + \\frac{0}{\\ell(m-\\ell)} + \\frac{0}{\\ell(m-\\ell)} + \\frac{0}{(m-\\ell)^2} \\\\\n&= 1.\n\\end{align*}\nOn the other hand,\n\\[\nc\\left(\\sum_{i=1}^k x_i\\right)^2 = c(2)^2 = 4c > \\frac{4\\ell^2}{\\ell^2 + (m-\\ell)^2} = 4.\n\\]\nTherefore, the inequality does not hold for $c > \\frac{\\ell^2}{\\ell^2 + (m-\\ell)^2}$.\n\nIn conclusion, the largest real number $c$ such that the inequality holds is $\\frac{\\ell^2}{\\ell^2 + (m-\\ell)^2}$."}
