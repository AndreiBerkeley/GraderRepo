{"id": "egmo-2021-q1", "solution": "Let's prove that the number \\(2021^{2021}\\) is fantabulous.\n\nFirst, we note that \\(2021\\) is fantabulous.  \nNext, we will show that if \\(n\\) is fantabulous, then \\(n+1\\) is also fantabulous.  \nSuppose \\(n\\) is fantabulous. Then, we have three cases to consider:\n1. If \\(n = m\\), then \\(2n+1 = 2m+1\\) and \\(3n = 3m\\). Since \\(m\\) is fantabulous, \\(2m+1\\) and \\(3m\\) are also fantabulous. Hence, \\(n+1 = m+1\\) is fantabulous.\n2. If \\(n = 2m+1\\), then \\(2n+1 = 4m+3\\) and \\(3n = 6m+3\\). Since \\(2m+1\\) is fantabulous, \\(4m+3\\) and \\(6m+3\\) are also fantabulous. Hence, \\(n+1 = 2m+2\\) is fantabulous.\n3. If \\(n = 3m\\), then \\(2n+1 = 6m+1\\) and \\(3n = 9m\\). Since \\(3m\\) is fantabulous, \\(6m+1\\) and \\(9m\\) are also fantabulous. Hence, \\(n+1 = 3m+1\\) is fantabulous.\n\nTherefore, by induction, all positive integers are fantabulous.\n\nSince \\(2021\\) is fantabulous, then \\(2021^{2021}\\) is also fantabulous."}
{"id": "egmo-2021-q2", "solution": "Let \\( P(x,y) \\) be the assertion that \\( f(xf(x) + y) = f(y) + x^2 \\).\n\nFrom \\( P(0,0) \\), we have\n\\[ f(0) = f(0) \\]\nwhich is a tautology.\n\nFrom \\( P(0,y) \\), we have\n\\[ f(y) = f(y) \\]\nwhich is also a tautology.\n\nFrom \\( P(x,0) \\), we have\n\\[ f(xf(x)) = f(0) + x^2 \\]\n\\[ f(xf(x)) = f(0) + x^2 \\]\n\\[ f(xf(x)) = f(0) + x^2 \\]\n\\[ f(xf(x)) = f(0) + x^2 \\]\nwhich implies that \\( f \\) is surjective.\n\nLet \\( a \\) be a rational number such that \\( f(a) = 0 \\). Then, from \\( P(a,0) \\), we have\n\\[ f(0) = f(0) + a^2 \\]\nwhich implies that \\( a = 0 \\).\n\nFrom \\( P(x,-xf(x)) \\), we have\n\\[ f(0) = f(-xf(x)) + x^2 \\]\n\\[ f(-xf(x)) = -x^2 \\]\nwhich implies that \\( f \\) is injective.\n\nFrom \\( P(1,0) \\), we have\n\\[ f(f(1)) = f(0) + 1 \\]\n\\[ f(f(1)) = 1 \\]\nwhich implies that \\( f(1) = 1 \\).\n\nFrom \\( P(1,y) \\), we have\n\\[ f(f(1) + y) = f(y) + 1 \\]\n\\[ f(y + 1) = f(y) + 1 \\]\nwhich implies that \\( f(x) = x \\) for all rational numbers \\( x \\).\n\nTherefore, the only function that satisfies the given functional equation is \\( f(x) = x \\) for all rational numbers \\( x \\)."}
{"id": "egmo-2021-q3", "solution": "Let \\( H \\) be the orthocenter of triangle \\( ABC \\), and let \\( D \\) be the foot of the altitude from \\( A \\) to \\( BC \\).  \nSince \\( E \\) and \\( F \\) are the intersections of the external bisector of angle \\( A \\) with the altitudes of \\( ABC \\) through \\( B \\) and \\( C \\) respectively, we have \\( \\angle EHA = \\angle FHA = 90^\\circ \\).  \nThis implies that \\( E \\), \\( F \\), \\( H \\) are collinear.  \n\nSince \\( \\angle EMA = \\angle BCA \\) and \\( \\angle ANF = \\angle ABC \\), we have \\( \\angle EMB = \\angle EMA = \\angle BCA \\) and \\( \\angle ANB = \\angle ANF = \\angle ABC \\).  \nThis implies that \\( \\triangle EMB \\sim \\triangle BCA \\) and \\( \\triangle ANB \\sim \\triangle ABC \\).  \nHence, we have \\( \\angle EBM = \\angle ACB \\) and \\( \\angle ANB = \\angle ABC \\).  \n\nNow, consider the cyclic quadrilateral \\( AENF \\).  \nWe have \\( \\angle AEN = \\angle ABC \\) and \\( \\angle ANE = \\angle ACB \\).  \nSince \\( \\angle ANB = \\angle ABC \\), we have \\( \\angle ANE = \\angle ANB \\), which implies that \\( \\angle NEB = \\angle NAB \\).  \nTherefore, \\( \\triangle NEB \\sim \\triangle NAB \\), which implies that \\( \\angle NEB = \\angle NAB = \\angle ACB \\).  \n\nHence, we have \\( \\angle EBM = \\angle NEB \\), which implies that \\( E \\), \\( F \\), \\( N \\), \\( M \\) are concyclic.  \nTherefore, the points \\( E \\), \\( F \\), \\( N \\), \\( M \\) lie on a circle."}
{"id": "egmo-2021-q4", "solution": "Let $X$ be the reflection of $A$ across the line $EF$. We will show that $X$ lies on line $BC$.\n\nSince $EF$ is perpendicular to $BI$, we have $\\angle BFE = 90^\\circ$. Similarly, since $EF$ is perpendicular to $CI$, we have $\\angle CEF = 90^\\circ$. Therefore, $BFEI$ and $CEFI$ are cyclic quadrilaterals.\n\nNow, we have $\\angle BFI = \\angle BEI = \\angle BAI$ and $\\angle CFI = \\angle CEI = \\angle CAI$. Since $X$ is the reflection of $A$ across $EF$, we have $\\angle BFX = \\angle BAX$ and $\\angle CEX = \\angle CAX$. Thus, $\\angle BFX + \\angle CEX = \\angle BAX + \\angle CAX = \\angle BAC = 180^\\circ - \\angle BCA$. This implies that $BFXE$ is a cyclic quadrilateral.\n\nTherefore, $\\angle EXF = \\angle EBF = \\angle EBI = \\angle IBC$. Similarly, $\\angle FXE = \\angle ICB$. Since $\\angle EXF + \\angle FXE = \\angle IBC + \\angle ICB = 180^\\circ$, we have $X \\in BC$.\n\nHence, the reflection of $A$ across the line $EF$ lies on the line $BC$."}
{"id": "egmo-2021-q5", "solution": "Let \\( n \\) be the number of points in \\( P \\). We are given that \\( n = 2021 \\). Let \\( f(n) \\) be the maximum number of fat triangles that can be formed with \\( n \\) points. We will prove that \\( f(n) = \\binom{n}{3} - \\binom{n-1}{3} \\).\n\nConsider a set of \\( n \\) points in the plane such that no three points are collinear and no two points lie on a line through the origin. Let \\( A \\) be the set of all triangles formed by choosing \\( 3 \\) points from the set \\( P \\). We will show that the maximum number of fat triangles is achieved when the origin is inside exactly one of the triangles in \\( A \\).\n\nLet \\( T \\) be a fat triangle with vertices in \\( P \\). If the origin is inside \\( T \\), then \\( T \\) is a fat triangle. If the origin is outside \\( T \\), then we can draw a line through the origin that intersects \\( T \\) at exactly one point. This divides \\( T \\) into two triangles, one of which is fat. Thus, each non-fat triangle can be split into two fat triangles.\n\nNow, let's count the number of fat triangles. If the origin is inside exactly one of the triangles in \\( A \\), then there are \\( \\binom{n}{3} - \\binom{n-1}{3} \\) fat triangles. This is because we choose \\( 3 \\) points from \\( P \\) to form a triangle, and then choose one of the \\( n \\) triangles to contain the origin.\n\nTherefore, the maximum number of fat triangles is \\( f(n) = \\binom{n}{3} - \\binom{n-1}{3} = \\binom{2021}{3} - \\binom{2020}{3} = 1365702660 \\)."}
{"id": "egmo-2021-q6", "solution": "Let's denote the given equation as\n\\[\n\\sum_{i=1}^{m} \\left\\lfloor\\frac{m}{i}\\right\\rfloor = n^2 + a.\n\\]\nWe know that for any positive integer \\( m \\), the sum\n\\[\n\\sum_{i=1}^{m} \\left\\lfloor\\frac{m}{i}\\right\\rfloor\n\\]\nis the number of lattice points in the first quadrant of the graph of the function \\( y = \\frac{m}{x} \\) for \\( 1 \\leq x \\leq m \\). This is because \\( \\left\\lfloor\\frac{m}{i}\\right\\rfloor \\) is the number of lattice points on the line \\( x = i \\) below the graph of \\( y = \\frac{m}{x} \\).\n\nNow, let's consider the function \\( f(x) = \\frac{m}{x} \\) for \\( x \\geq 1 \\). The number of lattice points in the first quadrant of the graph of this function is equal to the sum\n\\[\n\\sum_{i=1}^{m} \\left\\lfloor\\frac{m}{i}\\right\\rfloor.\n\\]\nWe know that the number of lattice points in the first quadrant of the graph of this function is at most \\( m^2 \\) because the graph is contained in the rectangle with vertices at \\( (1, m) \\), \\( (m, 1) \\), \\( (m, 0) \\), and \\( (0, m) \\).\n\nTherefore, we have\n\\[\n\\sum_{i=1}^{m} \\left\\lfloor\\frac{m}{i}\\right\\rfloor \\leq m^2.\n\\]\nThis implies that\n\\[\nn^2 + a \\leq m^2.\n\\]\nSince we want to find a nonnegative integer \\( a \\) for which the equation has more than one million different solutions, we need to find the maximum number of solutions for a given \\( a \\).\n\nLet's consider the case when \\( a = 0 \\). In this case, we have\n\\[\nn^2 \\leq m^2.\n\\]\nThe number of solutions to this inequality is given by the number of lattice points in the first quadrant of the graph of \\( y = x \\) for \\( 1 \\leq x \\leq m \\), which is \\( m \\). Therefore, for \\( a = 0 \\), the equation has at most \\( m \\) solutions.\n\nTo find the maximum number of solutions, we need to find the largest possible value of \\( a \\) such that the equation has more than one million different solutions. Let's denote this value as \\( a_{\\text{max}} \\).\n\nSince we want to maximize the number of solutions, we need to minimize the value of \\( m \\). The smallest possible value of \\( m \\) is 1, which gives us \\( n^2 \\leq 1 \\). This has only one solution, \\( n = 1 \\), and \\( m = 1 \\).\n\nTherefore, for \\( a = 0 \\), we have one solution. To find the maximum value of \\( a \\) for which the equation has more than one million different solutions, we need to find the largest possible value of \\( a \\) such that the equation has more than one million solutions when \\( m = 1 \\).\n\nFor \\( m = 1 \\), the equation becomes\n\\[\n\\left\\lfloor\\frac{1}{1}\\right\\rfloor = n^2 + a,\n\\]\nwhich simplifies to\n\\[\n1 = n^2 + a.\n\\]\nSince \\( n \\) is a positive integer, the smallest possible value of \\( n \\) is 1, which gives us \\( a = 0 \\). This gives us one solution.\n\nTherefore, the equation has at most one solution for any nonnegative integer \\( a \\). Since we want to find a nonnegative integer \\( a \\) for which the equation has more than one million different solutions, such an \\( a \\) does not exist."}
