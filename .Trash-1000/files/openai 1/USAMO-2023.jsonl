{"id": "usamo-2023-q1", "solution": "Let $O$ be the circumcenter of triangle $ABP$. Since $O$ lies on the perpendicular bisector of $AB$, we have $OA = OB$. \n\nSince $O$ is the circumcenter of triangle $ABP$, we have $OA = OP$. \n\nSince $M$ is the midpoint of $BC$, we have $AM = \\frac{1}{2}AC$. \n\nSince $P$ is the foot of the perpendicular from $C$ to $AM$, we have $CP = \\frac{1}{2}AC$. \n\nTherefore, $OP = CP$. \n\nSince $OA = OP$ and $CP = \\frac{1}{2}AC$, we have $OA = \\frac{1}{2}AC$. \n\nSince $N$ is the midpoint of $AQ$, we have $AN = \\frac{1}{2}AC$. \n\nTherefore, $OA = AN$. \n\nSince $OA = AN$ and $OB = BM$, we have $\\triangle OAN \\cong \\triangle OBM$ by SAS congruence. \n\nTherefore, $\\angle OAN = \\angle OBM$ and $\\angle OAN = \\angle OBM$. \n\nSince $O$ is the circumcenter of triangle $ABP$, we have $\\angle OBP = 2\\angle OAP$. \n\nSince $\\angle OAN = \\angle OBM$ and $\\angle OAN = \\angle OBM$, we have $\\angle OBP = 2\\angle OAN$. \n\nTherefore, $\\angle OBP = 2\\angle OAN = 2\\angle OBM$. \n\nSince $\\angle OBP = 2\\angle OBM$, we have $\\angle OBM = \\frac{1}{2}\\angle OBP$. \n\nSince $OB = BM$, we have $\\triangle OBM$ is isosceles. \n\nTherefore, $\\angle OMB = \\angle OBM = \\frac{1}{2}\\angle OBP$. \n\nSince $\\angle OBP = 2\\angle OAN$, we have $\\angle OMB = \\angle OAN$. \n\nTherefore, $\\angle OMB = \\angle OAN$. \n\nSince $\\angle OBM = \\angle OAN$ and $OB = BM$, we have $\\triangle OBM \\cong \\triangle OAN$ by SAS congruence. \n\nTherefore, $ON = OM$ and $NB = NA$. \n\nSince $ON = OM$ and $NB = NA$, we have $NB = NC$. \n\nThus, we have shown that $NB = NC$."}
{"id": "usamo-2023-q2", "solution": "Let $P(x,y)$ be the assertion $f(xy+f(x)) = xf(y) + 2$.\n\n$P(1,y)$ gives $f(y+f(1)) = f(y) + 2$ for all $y>0$. Thus, $f(y) = f(y+f(1))-2$ for all $y>0$.\n\n$P(x,1)$ gives $f(x+f(x)) = xf(1) + 2$ for all $x>0$. Thus, $f(x) = f(x+f(x))-xf(1)-2$ for all $x>0$.\n\nCombining the two results, we have $f(y) = f(y+f(1))-2 = f(y+f(y+f(y)))-yf(1)-2$ for all $y>0$.\n\nLet $a = f(1)$, then $f(y) = f(y+a)-2 = f(y+f(y+a))-ay-2$ for all $y>0$.\n\nAssume $f(x) = f(x+a)$ for some $x>0$. Then, $f(x) = f(x+a) = f(x+f(x+a))-a(x)-2 = f(x)-ax-2$, which implies $a=0$. Therefore, $f(x) = f(x+a)$ for all $x>0$ if and only if $a=0$.\n\nThus, $f(x) = f(x+a)$ for all $x>0$ if and only if $a=0$. This implies $f(x) = f(x+a) = f(x)$ for all $x>0$, which means $f$ is a constant function.\n\nSubstitute $f(x) = c$ into the original equation, we get $c = cx + 2$ for all $x>0$, which implies $c=2$.\n\nTherefore, the only solution to the functional equation is $f(x) = 2$ for all $x>0$."}
{"id": "usamo-2023-q3", "solution": "Let's first consider the case when $n=1$. In this case, there is only one square on the board, so $k(C)=1$ for any configuration $C$.\n\nNow, let's consider the case when $n=3$. In this case, the board looks like the following:\n\\[\n\\begin{array}{|c|c|c|}\n\\hline\n& & \\\\\n\\hline\n& & \\\\\n\\hline\n& & \\\\\n\\hline\n\\end{array}\n\\]\nFor $n=3$, there is only one possible configuration of dominoes that covers all but one square. It looks like this:\n\\[\n\\begin{array}{|c|c|c|}\n\\hline\n& & \\\\\n\\hline\n& & \\\\\n\\hline\n& & \\\\\n\\hline\n\\end{array}\n\\]\nIn this case, we can slide the domino in two different ways to uncover the remaining square. So, $k(C)=2$ for $n=3$.\n\nNow, let's consider the case when $n=5$. In this case, the board looks like the following:\n\\[\n\\begin{array}{|c|c|c|c|c|}\n\\hline\n& & & & \\\\\n\\hline\n& & & & \\\\\n\\hline\n& & & & \\\\\n\\hline\n& & & & \\\\\n\\hline\n& & & & \\\\\n\\hline\n\\end{array}\n\\]\nFor $n=5$, there are two possible configurations of dominoes that cover all but one square. They look like this:\n\\[\n\\begin{array}{|c|c|c|c|c|}\n\\hline\n& & & & \\\\\n\\hline\n& & & & \\\\\n\\hline\n& & & & \\\\\n\\hline\n& & & & \\\\\n\\hline\n& & & & \\\\\n\\hline\n\\end{array}\n\\]\nand\n\\[\n\\begin{array}{|c|c|c|c|c|}\n\\hline\n& & & & \\\\\n\\hline\n& & & & \\\\\n\\hline\n& & & & \\\\\n\\hline\n& & & & \\\\\n\\hline\n& & & & \\\\\n\\hline\n\\end{array}\n\\]\nIn the first configuration, we can slide the domino in four different ways to uncover the remaining square. In the second configuration, we can slide the domino in two different ways to uncover the remaining square. So, $k(C)=4+2=6$ for $n=5$.\n\nFrom the above analysis, we can see that $k(C)$ depends on $n$ as follows:\n\\[k(C) = \n\\begin{cases} \n1 & \\text{if } n=1 \\\\\n2 & \\text{if } n=3 \\\\\n2n & \\text{if } n>3\n\\end{cases}\n\\]\n\nTherefore, the possible values of $k(C)$ as a function of $n$ are $1$, $2$, and $2n$ for $n>3$."}
{"id": "usamo-2023-q4", "solution": "Let $S$ be the set of all integers that can be obtained by adding multiples of $a$ to the $N$ integers on the board.\nLet $T$ be the set of all integers that can be obtained by repeatedly dividing the $N$ integers on the board by $2$.\nSince $S$ is a set of integers and $T$ is a set of even integers, we have $S \\subseteq T$.\n\nLet $m$ be the smallest integer in $S$.\nSince $m$ is in $S$, there exists an integer $k$ such that $m = n_1 + ka$ for some $n_1$ on the board.\nSince $m$ is the smallest integer in $S$, we have $m - a \\notin S$.\nThis implies that $m - a$ is not in the set of integers on the board, so $m - a$ must be an even number.\nTherefore, $m - a \\in T$.\nSince $m - a$ is in $T$, Bob can divide $m - a$ by $2$ on his turn, resulting in $\\frac{m - a}{2}$.\nSince $m$ is the smallest integer in $S$, we have $\\frac{m - a}{2} \\notin S$.\nThis implies that $\\frac{m - a}{2}$ is not in the set of integers on the board, so $\\frac{m - a}{2}$ must be an even number.\nTherefore, $\\frac{m - a}{2} \\in T$.\nContinuing this process, we see that Bob can keep dividing by $2$ until he reaches an integer $m'$ such that $m' \\in S$.\nAt this point, Alice must add $a$ to $m'$, and the resulting number $m' + a$ will be in $S$.\nSince $m' + a$ is in $S$, Bob can keep dividing by $2$ until he reaches an integer $m''$ such that $m'' \\in S$.\nThis process will eventually lead to a cycle where the same integers in $S$ are repeated.\n\nSince $S$ is finite and Bob can force the game to end by repeatedly dividing by $2$ until a number in $S$ is reached, the game is guaranteed to end regardless of Alice's or Bob's moves."}
{"id": "usamo-2023-q5", "solution": "Let $a_1, a_2, \\ldots, a_n$ be the numbers in a row of the table. Since the numbers in each row can be permuted to form an arithmetic progression, we have $a_i = a_1 + (i-1)d$ for some common difference $d$. Thus, the sum of the numbers in the row is given by\n\\begin{align*}\nS &= a_1 + a_2 + \\cdots + a_n \\\\\n&= na_1 + d\\left(1 + 2 + \\cdots + n\\right) \\\\\n&= na_1 + \\frac{n(n+1)}{2}d.\n\\end{align*}\n\nSimilarly, let $b_1, b_2, \\ldots, b_n$ be the numbers in a column of the table. Since the numbers in each column can be permuted to form an arithmetic progression, we have $b_i = b_1 + (i-1)e$ for some common difference $e$. Thus, the sum of the numbers in the column is given by\n\\begin{align*}\nT &= b_1 + b_2 + \\cdots + b_n \\\\\n&= nb_1 + e\\left(1 + 2 + \\cdots + n\\right) \\\\\n&= nb_1 + \\frac{n(n+1)}{2}e.\n\\end{align*}\n\nSince the sum of the numbers in each row is equal to the sum of the numbers in each column, we have $na_1 + \\frac{n(n+1)}{2}d = nb_1 + \\frac{n(n+1)}{2}e$. This simplifies to $a_1 + \\frac{n+1}{2}d = b_1 + \\frac{n+1}{2}e$.\n\nTherefore, in order to transform any row-valid arrangement into a column-valid arrangement by permuting the numbers in each row, we must have $a_1 + \\frac{n+1}{2}d = b_1 + \\frac{n+1}{2}e$ for all rows. This implies that the common differences $d$ and $e$ must be the same for all rows.\n\nSince $n \\geq 3$, we can choose $n = 3$ as a counterexample. Consider the row-valid arrangement where the rows are $(1, 2, 3)$, $(4, 5, 6)$, and $(7, 8, 9)$. This arrangement cannot be transformed into a column-valid arrangement by permuting the numbers in each row, as the common differences in the rows are different.\n\nTherefore, it is not possible to transform any row-valid arrangement into a column-valid arrangement by permuting the numbers in each row for any value of $n$."}
{"id": "usamo-2023-q6", "solution": "Let $X$ be the intersection of $BC$ and $AI$. Since $I$ is the incenter of $\\triangle ABC$, we have $IX \\perp BC$. Let $Y$ be the intersection of $AI$ and the circumcircle of $\\triangle ABC$. Since $D$ is on the circumcircle of $\\triangle ABC$, we have $\\angle AYD = \\angle AXD = 90^\\circ$. Therefore, $AXDY$ is cyclic.\n\nSince $I$ is the incenter of $\\triangle ABC$, we have $AI$ bisects $\\angle BAC$. Therefore, $\\angle BAI = \\angle IAC$. Since $AXDY$ is cyclic, we have $\\angle AYX = \\angle ADX$. Since $I$ is the incenter of $\\triangle ABC$, we have $IX \\perp BC$, so $\\angle ADX = \\angle AYX = 90^\\circ - \\angle AYX = 90^\\circ - \\angle AYD = \\angle ADY$. Therefore, $\\angle BAI = \\angle IAC = \\angle ADY$, which implies that $AD$ is parallel to $BC$.\n\nNow, consider the circumcircle of $\\triangle DII_a$. Since $AD$ is parallel to $BC$, we have $\\angle DII_a = \\angle DAI = \\angle BAD$. Similarly, considering the circumcircle of $\\triangle DI_bI_c$, we have $\\angle DI_bI_c = \\angle DAI = \\angle CAD$.\n\nNow, let $Z$ be the intersection of $AD$ and $BC$. Since $AD$ is parallel to $BC$, we have $\\angle DZI = \\angle DAI = \\angle CAD$. Since $I$ is the incenter of $\\triangle ABC$, we have $\\angle IZD = \\angle IAD = \\angle CAD$. Therefore, $\\triangle IZD$ is isosceles, which implies that $IZ = ID$.\n\nNow, consider the circumcircle of $\\triangle DII_a$. Since $IZ = ID$, we have $\\triangle IZD$ is isosceles, which implies that $\\angle IZD = \\angle IDZ = \\angle DII_a$. Therefore, $\\angle DII_a = \\angle DZI = \\angle CAD$. Similarly, considering the circumcircle of $\\triangle DI_bI_c$, we have $\\angle DI_bI_c = \\angle DAI = \\angle BAD$.\n\nSince $\\angle DII_a = \\angle CAD$ and $\\angle DI_bI_c = \\angle BAD$, we have $\\angle CAD = \\angle BAD$. Therefore, $\\angle BAD = \\angle CAD$, which implies that $\\angle BAD = \\angle EAC$."}
