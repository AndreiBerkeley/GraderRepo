{"id": "imo-2024-q1", "solution": "Let  \n\nS_n(\u03b1)=\u230a\u03b1\u230b+\u230a2\u03b1\u230b+\u22ef+\u230an\u03b1\u230b ,\u2003 n=1,2,\u2026\n\nWe look for all real \u03b1 such that n | S_n(\u03b1) for every positive integer n.\n\nNotation  \n{x}=x\u2212\u230ax\u230b is the fractional part of x, 0\u2264{x}<1.  \nWrite \u03b1=t+\u03b2 with t=\u230a\u03b1\u230b\u2208\u2124 and \u03b2\u2208[0,1).\n\n-------------------------------------------------\n1.  Even integers work\n-------------------------------------------------\nFor an even integer \u03b1=2k we have  \n\nS_n(2k)=2k(1+2+\u22ef+n)=2k\u00b7 n(n+1) 2 =k n(n+1)=n\u00b7k(n+1),\n\nhence n divides S_n(2k) for every n.  \nThus every even integer belongs to the required set.\n\n-------------------------------------------------\n2.  A convenient reformulation\n-------------------------------------------------\nBecause {k\u03b1}={k\u03b2},  \n\nS_n(\u03b1)=\u2211_{k=1}^{n}(k\u03b1\u2212{k\u03b1})  \n      =\u03b1 n(n+1) 2 \u2212\u2211_{k=1}^{n}{k\u03b2}.                         (1)\n\nDivide (1) by n :\n\nT_n:= S_n(\u03b1) n =\u03b1(n+1) 2 \u2212u_n,             (2)\n\nwhere  \n\nu_n:= 1 n \u2211_{k=1}^{n}{k\u03b2}\u2208[0,1).          (3)\n\nThe hypothesis \u201cn | S_n(\u03b1)\u201d is equivalent to  \n\nT_n\u2208\u2124\u2003for every n.                         (4)\n\n-------------------------------------------------\n3.  How fast can u_n vary?\n-------------------------------------------------\nFrom (3):\n\nu_{n+1}= 1 n+1 (n u_n+{(n+1)\u03b2}).\n\nHence  \n\n|u_{n+1}\u2212u_n|= |{(n+1)\u03b2}\u2212u_n| n+1 \u2264 1 n+1 .         (5)\n\nSo the sequence (u_n) changes extremely slowly: the jump from n to n+1\nis at most 1/(n+1).\n\n-------------------------------------------------\n4.  Consequences if \u03b2\u22600\n-------------------------------------------------\nAssume \u03b2\u22600.  \nFrom (2),\n\nfractional part of T_n = fractional part of ( \u03b2(n+1) 2 \u2212u_n).         (6)\n\nDenote  \n\nf_n:= \u03b2(n+1) 2 \u2212u_n \u2003(mod 1).\n\nBecause of (4), f_n must always cancel the fractional part contributed\nby t(n+1)/2.\n\nThere are two possibilities.\n\nA.  t is even  \nThen t(n+1)/2 is integral, so (4) demands f_n\u22610 (mod 1) for all n.\n\nB.  t is odd  \nThen t(n+1)/2 is integral if n is odd and has fractional part \u00bd if n\nis even; consequently\n\n    f_n\u22610\u2003(n odd), \u2003f_n\u2261\u00bd\u2003(n even).        (7)\n\n-------------------------------------------------\n5.  But f_n cannot oscillate so little\n-------------------------------------------------\nCompute the difference of successive f_n\u2019s:\n\nf_{n+1}\u2212f_n = \u03b2 2 \u2212(u_{n+1}\u2212u_n).             (8)\n\nUsing the bound (5):\n\n|f_{n+1}\u2212f_n\u2212\u03b2/2| \u2264 1 n+1 .                   (9)\n\nBecause \u03b2\u22600, the constant |\u03b2|/2 is positive; choose N so large that\n|\u03b2|/2\u22121/(N+1)>0.  \nFor all n\u2265N,\n\n|f_{n+1}\u2212f_n| \u2265 |\u03b2| 2 \u2212 1 n+1 \u2265 |\u03b2| 2 \u2212 1 N+1 >0.             (10)\n\nThus (f_n) must move by at least a fixed positive amount for every large\nn, which is impossible in either situation A or B:\n\n\u2022 In A we would have f_n constantly 0, so every difference is 0.  \n\u2022 In B the sequence alternates between two fixed values (0 and \u00bd),\nhence |f_{n+1}\u2212f_n| is either 0 or \u00bd, contradicting (10) once n is\nlarge enough (\u00bd cannot equal the small bound in (10) for large n).\n\nTherefore \u03b2 must be 0.\n\n-------------------------------------------------\n6.  So \u03b1 is an integer \u2013 what kind?\n-------------------------------------------------\nPut \u03b2=0 in (4).  Then\n\nS_2(\u03b1)=\u230a\u03b1\u230b+\u230a2\u03b1\u230b=\u03b1+2\u03b1=3\u03b1.\n\nThe condition 2 | 3\u03b1 forces \u03b1 to be even (because gcd(2,3)=1).  \nHence \u03b1=2k, k\u2208\u2124.\n\n-------------------------------------------------\n7.  Conclusion\n-------------------------------------------------\nThe only real numbers satisfying the requirement are the even\nintegers.\n\nAnswer.  \u03b1 \u2208 {\u2026, \u22124, \u22122, 0, 2, 4, \u2026} = 2\u2124."}
{"id": "imo-2024-q2", "solution": "Let  \n\nd_n = gcd(a^{\\,n}+b,\\; b^{\\,n}+a), \u2003n = 1,2,\\dots \n\nand assume that the positive integers a , b are fixed.  \nWe have to decide for which pairs (a , b) the sequence (d_n) is\neventually constant, i.e. d_n = d_{n+1}= \\dots = d for all n larger than\nsome N.\n\n------------------------------------------------\n1.  The pair (1,1)\n\nFor a = b = 1 we have 1^{\\,n}+1 = 2, hence\n\nd_n = gcd(2,2)=2 \u2003for every n ,\n\nso the sequence is (and always was) the constant sequence 2.\nThus (1,1) certainly works.\n\nIn the rest of the proof we assume (a , b) \u2260 (1,1) and show that the\nsequence (d_n) can never stabilise.\n\n------------------------------------------------\n2.  A first necessary condition for an eventual constant\n\nWrite d = d_N = d_{N+1}= \\dots , choose some n \u2265 N and put\n\na^{\\,n}+b = d x ,\u2003 b^{\\,n}+a = d y\u2003 (x , y \u2208 \u2115).\n\nBecause d divides both numbers, the following identities hold:\n\n0 \u2261 a^{\\,n}+b \u2261 -b\u2003(mod d)\u2003\u2003\u21d2\u2003 a^{\\,n} \u2261 -b (mod d)           (1)\n0 \u2261 b^{\\,n}+a \u2261 -a\u2003(mod d)\u2003\u2003\u21d2\u2003 b^{\\,n} \u2261 -a (mod d)           (2)\n\nMultiplying (1) and (2) gives\n\n(ab)^{\\,n} \u2261 a b\u2003(mod d)\u2003\u21d2\u2003(ab)^{\\,n-1} \u2261 1\u2003(mod d).         (3)\n\nTake now the next exponent, n+1 \u2265 N.  \nBecause d_{n+1}=d, the same identities hold with n replaced by n+1; using\n(1) we obtain\n\n0 \u2261 a^{\\,n+1}+b = a(a^{\\,n})+b \u2261 a(-b)+b = b(1-a) (mod d),  \n0 \u2261 b^{\\,n+1}+a = b(b^{\\,n})+a \u2261 b(-a)+a = a(1-b) (mod d).\n\nHence\n\nd | b(a-1)\u2003and\u2003d | a(b-1).                                         (4)\n\n------------------------------------------------\n3.  Two consecutive exponents force d \u2264 2\n\nBecause d divides (ab)^{n-1}-1 for all n \u2265 N (see (3)), it also divides\nthe difference of two consecutive powers, therefore d divides  \n(ab)^{n}-(ab)^{n-1}= (ab)^{n-1}(ab-1).  Because d | (ab)^{n-1}-1, we get\n\nd | (ab-1).                                                        (5)\n\nCombining (4) and (5) we see that d divides simultaneously\n\na , b , a-1 , b-1 .\n\nBut no prime can divide a and a-1 (or b and b-1) at the same time.\nConsequently every prime divisor of d can occur only once in the list,\nso d is square\u2013free and in fact\n\nd \u2264 2.                                                              (6)\n\nThus the only two possible limiting values are d = 1 or d = 2.\nWe treat them separately.\n\n------------------------------------------------\n4.  The limiting value d = 1 is impossible\n\nSuppose d_n = 1 for all n \u2265 N.  \nIf gcd(a , b) > 1 then that common divisor divides every d_n \u2013 a\ncontradiction.  Hence gcd(a , b) = 1.\n\nIf a + b possesses an odd prime factor p (that prime is coprime to\nab), then\n\na \u2261 -b (mod p)\u2003\u21d2\u2003a^{p} \u2261 a\u2003(mod p)\u2003(Fermat)  \n\u21d3\u2003a^{p}+b \u2261 0 (mod p)  \nSimilarly,\u2003b^{p}+a \u2261 0 (mod p).\n\nThus p divides d_p > 1, contradicting d_p = 1.  Therefore\n\na + b = 2^{k}\u2003with some k \u2265 1.                                     (7)\n\nBecause a and b are coprime, (7) forces both of them to be odd.\nTake any odd exponent n.  Then a^{\\,n} and b^{\\,n} are odd, hence\n\na^{\\,n}+b and b^{\\,n}+a are even  \u21d2  d_n is even.\n\nBut an even number cannot be 1, so d_n \u2260 1 for infinitely many n.\nThis contradicts the assumption that all d_n (n \u2265 N) equal 1.\nHence d = 1 cannot occur.\n\n------------------------------------------------\n5.  What happens if d = 2 ?\n\nSo from now on d = 2 and by (6) both a and b are odd.\nWrite a + b = 2^{k} (k \u2265 1 again).\nFor every odd n we may apply the 2\u2013adic Lifting-The-Exponent (LTE) lemma\nto the odd numbers a and \u2212b :\n\nv_2(a^{\\,n}+b) = v_2(a^{\\,n}-(-b)^{\\,n})\n               = v_2(a + b) + v_2(n) = k + v_2(n).\n\n(The last equality holds because n is odd.)\nExactly the same formula holds for b^{\\,n}+a.  Consequently\n\nv_2(d_n) = k + v_2(n)\u2003for every odd n.                             (8)\n\nSince v_2(n) can be made arbitrarily large simply by choosing n to be\nlarge odd powers of two (n = 2^{m}+1, say), the 2-adic valuation of d_n\nis unbounded.  In particular v_2(d_n) cannot stay equal to 1, so the\nsequence (d_n) cannot stabilise at the value 2 unless k = 1, i.e.\na + b = 2.\n\nThe only positive integers with a + b = 2 are a = b = 1.\nBut we excluded (1,1) at the beginning of this section.\nTherefore d = 2 is impossible for every other pair of odd numbers.\n\n------------------------------------------------\n6.  Conclusion\n\nThe sequence (d_n) can be eventually constant only in the already\nverified case (a , b) = (1,1).\n\n------------------------------------------------\nAnswer.  \nThe sequence  \n\ngcd(a^{\\,n}+b,\\; b^{\\,n}+a)\\;(n = 1,2,\\dots)\n\nis eventually constant if and only if (a , b) = (1,1); in that case it\nis the constant sequence 2."}
{"id": "imo-2024-q3", "solution": "Write  \n\n\u2003\u2003\\(\\displaystyle c_n(x)=\\#\\{\\,j\\le n\\mid a_j=x\\}\\)       (the number of occurrences of the integer \\(x\\) among the first \\(n\\) terms).\n\nFor every \\(n>N\\)\n\n\u2003\u2003\\(\\displaystyle a_n=c_{\\,n-1}(a_{n-1}).\\tag{1}\\)\n\nStep 1.  1 occurs infinitely many times  \n\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014  \nAssume that 1 occurs only finitely many times; say no term beyond the index \\(M\\ge N\\) equals 1.  \nBecause every first\u2013time (new) value is immediately followed by 1 (by (1) the\nfirst occurrence of a value \\(v\\) is followed by \\(a_{n+1}=c_{\\,n}(v)=1\\)),\nno new value can appear after \\(M-1\\).\nHence from the index \\(M\\) on only a finite set  \n\n\u2003\u2003\\(S=\\{a_M,a_{M+1},a_{M+2},\\dots\\}\\)\n\nof positive integers is used.  \nChoose a value \\(s\\in S\\) that occurs infinitely many times.\nLet \\(k\\) be larger than all elements of \\(S\\).\nBecause \\(s\\) occurs infinitely often, pick an index \\(n\\ge M\\) at which\n\\(s\\) appears for the \\(k\\)-th time.  \nThen \\(a_{n}=s\\) and, by (1),\n\n\u2003\u2003\\(a_{n+1}=c_{\\,n}(s)=k\\;>\\;\\max S\\),\n\ncontradicting \\(a_{n+1}\\in S\\).\nThus 1 must occur infinitely often in the full sequence.\n\nStep 2. 1 occurs infinitely often in at least one parity  \n\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014  \nThe infinitely many 1\u2019s occupy either infinitely many odd places or\ninfinitely many even places (or both).  \nWithout loss of generality assume\n\n\u2003\u2003\\(a_{2m}=1\\) for infinitely many indices \\(m\\).\n\nStep 3.  From some point on every even term equals 1  \n\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014  \nFix the smallest index \\(m_0\\) with \\(a_{2m_0}=1\\).\nWe prove by induction on \\(m\\ge m_0\\) that\n\n\u2003\u2003\\(a_{2m}=1.\\)\n\nBase \\(m=m_0\\) is true by definition.  \nInductive step:\nsuppose \\(a_{2m}=1\\) with \\(m\\ge m_0\\).\nLet  \n\n\u2003\u2003\\(t=a_{2m+1}=c_{\\,2m}(1)\\)\n\nbe the number of 1\u2019s among the first \\(2m\\) terms (formula (1)).\nBecause a new 1 just appeared at position \\(2m\\), this count increased by\none; consequently \\(t\\) has never appeared before and is a\nnew value.\nTherefore the next term is\n\n\u2003\u2003\\(a_{2m+2}=c_{\\,2m+1}(t)=1.\\)\n\nHence \\(a_{2(m+1)}=1\\) and the induction is complete.\n\nThus all even\u2013indexed terms from position \\(2m_0\\) onward are equal to 1;\nthe even subsequence  \n\n\u2003\u2003\\(a_2,\\,a_4,\\,a_6,\\,\\dots\\)\n\nis ultimately the constant sequence 1, i.e. it is periodic (with period 1).\n\nStep 4.  Conclusion  \n\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014  \nWe have shown that if the even positions contain infinitely many 1\u2019s, the\neven subsequence is eventually periodic.  \nThe same argument, applied verbatim to the odd positions, shows that\nif instead the odd positions contain infinitely many 1\u2019s, the odd\nsubsequence is eventually periodic.\n\nBecause 1 appears infinitely many times in the whole sequence,\nat least one of the two parity classes contains infinitely many 1\u2019s;\nhence at least one of the subsequences  \n\n\u2003\u2003\\(a_1,\\,a_3,\\,a_5,\\dots\\quad\\text{or}\\quad a_2,\\,a_4,\\,a_6,\\dots\\)\n\nis eventually periodic.\n\nThis completes the proof."}
{"id": "imo-2024-q4", "solution": "I am sorry \u2013 I have not yet been able to find a satisfactory, fully\u2013synthetic proof."}
{"id": "imo-2024-q5", "solution": "Answer: \u20032023  \n\nExplanation  \n\n1.  A strategy that always works in at most 2023 attempts  \n\nLabel the columns \\(1,2,\\dots ,2023\\).  \nOn his \\(j\\)-th attempt (\\(j=1,2,\\dots ,2023\\))\n\n\u2003\u2022 Turbo starts in the lowest\u2013numbered column that he has never tried before (that\n  is, in column \\(j\\)).  \n\u2003\u2022 He walks straight down that column until either  \n\u2003\u2003\u2013 he meets a monster (the attempt ends in defeat and he has learned that this\n     column contains a monster), or  \n\u2003\u2003\u2013 he reaches the last row (the attempt ends in victory).\n\nBecause there are exactly \\(2022\\) monsters and they are all in different\ncolumns, at most \\(2022\\) of the \\(2023\\) columns can harbour a monster.\nConsequently the column tried on or before the \\(2023^{\\text{rd}}\\) attempt is\ncertain to be the unique completely monster\u2013free column, so Turbo has reached\nthe bottom row by that time.  Hence\n\n\u2003\u2003Turbo can always succeed in at most \\(2023\\) attempts.       \\((\\ast )\\)\n\n\n\n2.  Why no strategy can guarantee success sooner  \n\nAssume, to obtain a contradiction, that some strategy would always reach the\nbottom row in at most \\(2022\\) attempts.  \nFix such a strategy and look at the information Turbo possesses after he has\nfailed \\(k\\,(<2022)\\) times:\n\n\u2003\u2022 He has discovered the positions of exactly \\(k\\) monsters, one per failed\n  attempt.  \n\u2003\u2022 Therefore he knows precisely \\(k\\) columns that contain monsters.  \n\u2003\u2022 Let\n  \\[\n     S_k:=\\{1,2,\\dots ,2023\\}\\setminus\\{\\text{those }k\\text{ columns}\\}.\n  \\]\n  These \\(|S_k|=2023-k\\ge 2\\) columns are still \u201cpossible\u201d locations for the\n  unique monster-free column.\n\nLook now at how the given strategy is going to conduct the next (namely, the\n\\((k+1)\\)-st) attempt.  Long before the monsters are really placed we can\nsimulate that attempt and obtain the finite sequence of cells\n\n\\[\n     P=(p_1,p_2,\\dots ,p_m),\\qquad p_t=(r_t,c_t),\n\\]\n\nthat Turbo will step on **provided he never meets an undiscovered\nmonster**.  (The sequence is well defined because the strategy is a fixed set\nof rules depending only on previous experiences.)\n\nBecause \\(|S_k|\\ge 2\\), pick two different columns  \n\\(a,b\\in S_k\\).\n\nCase 1.  The path \\(P\\) visits column \\(a\\) in some as-yet-unrevealed row\n\\(r\\).  \nConstruct a monster placement still consistent with all earlier observations as\nfollows:\n\n\u2003\u2022 Put the (so far unknown) monster of row \\(r\\) at the very cell \\((r,a)=p_t\\)\n  that Turbo is going to step on.  \n\u2003\u2022 Put each of the remaining unknown monsters in a **distinct** column chosen\n  among the other columns of \\(S_k\\setminus\\{a\\}\\); this is possible because\n  there are at least as many still-free columns as still-empty rows.  \n\nAll conditions of the original problem are fulfilled and Turbo\ninevitably hits the monster in \\((r,a)\\) on his \\((k+1)\\)-st attempt.  \nThus he certainly cannot reach the bottom row in \\(k+1\\) attempts.\n\nCase 2.  The path \\(P\\) avoids column \\(a\\) completely.\nDo the same construction with column \\(b\\) instead of \\(a\\).\nAgain a legal arrangement of monsters is produced that forces Turbo to be\neaten on the coming attempt.\n\nHence, **whatever the strategy is**, as long as fewer than \\(2022\\) monsters\nhave been located there is a legal way to place the remaining monsters that\ndefeats the very next attempt.  Therefore Turbo must first\ndiscover all \\(2022\\) monster columns,\nand can succeed only on the subsequent try.\n\nConsequently\n\n\u2003\u2003No strategy can guarantee success in fewer than \\(2023\\) attempts.       \\((\\dagger )\\)\n\n\n\n3.  Conclusion  \n\nCombining \\((\\ast )\\) and \\((\\dagger )\\) we obtain that the smallest integer\n\\(n\\) with the desired property is\n\n\\[\n\\boxed{\\,n=2023\\,}.\n\\]"}
{"id": "imo-2024-q6", "solution": "Let  \n\n\\[\nP(x,y):\\qquad  \n(\\text A)\\;f(x+f(y))=f(x)+y\\quad\\text{or}\\quad  \n(\\text B)\\;f\\bigl(f(x)+y\\bigr)=x+f(y)\n\\]\n\nbe the assertion of the statement.  \nThroughout the solution we work only with rational numbers; no other\ndomain or codomain occurs.\n\n--------------------------------------------------------------------\n1.  The value of $f$ at $0$\n\nPut $x=y=0$ in $P$ :\n\n\\[\nf\\bigl(f(0)\\bigr)=f(0).\\tag{1}\n\\]\n\nNow put $x=0,\\;y=-f(0)$ :\n\n\u2013 If $(\\text A)$ is true,  \n\u2003$f\\bigl(f(-f(0))\\bigr)=f(0)-f(0)=0$.  \n\u2003Because of (1) this gives $f(0)=0$.\n\n\u2013 If $(\\text B)$ is true,  \n\u2003$f\\bigl(f(0)-f(0)\\bigr)=f(-f(0))$, i.e. $f(0)=f(-f(0))$.  \n\u2003Together with (1) it again yields $f(0)=0$.\n\nHence  \n\n\\[\n\\boxed{\\,f(0)=0\\,}. \\tag{2}\n\\]\n\n--------------------------------------------------------------------\n2.  Surjectivity of $f$\n\nWith (2) the alternative $P\\bigl(f(0),y\\bigr)$ becomes\n\n\\[\nf\\bigl(f(y)\\bigr)=y\\quad\\text{or}\\quad f\\bigl(f(0)+y\\bigr)=f(y).\n\\]\n\nThe second possibility reads $f(y)=f(y)$ and is therefore always true,\nwhile the first one gives $f\\bigl(f(y)\\bigr)=y$.  \nConsequently, for every $y$ there is some argument, namely $f(y)$,\nwhose image is $y$; hence $f$ is surjective.\n\n--------------------------------------------------------------------\n3.  A crucial identity:  $f(-f(x))=-x$\n\nBecause of surjectivity we can pick, for any fixed $x$, a rational\n$y$ with  \n\n\\[\nf(y)=-x.\n\\]\n\nApply $P(x,y)$.\n\nIf $(\\text A)$ is true, then\n\n\\[\nf\\bigl(x+f(y)\\bigr)=f(x)+y\\;\\Longrightarrow\\;\nf(0)=f(x)+y\\;\\Longrightarrow\\;y=-f(x).\n\\]\n\nIf $(\\text B)$ is true, then\n\n\\[\nf\\bigl(f(x)+y\\bigr)=x+f(y)\\;\\Longrightarrow\\;\nf(0)=x-f(x)\\;\\Longrightarrow\\;x=f(x),\n\\]\n\nand in this case again $y=-f(x)$.  \nHence in either case $y=-f(x)$, and recalling $f(y)=-x$ we obtain  \n\n\\[\n\\boxed{\\,f\\bigl(-f(x)\\bigr)=-x\\quad\\forall x\\in\\Bbb Q.\\,}\\tag{3}\n\\]\n\n--------------------------------------------------------------------\n4.  Oddness and involution\n\nApply $f$ to both sides of (3) and use (3) once more:\n\n\\[\nf\\bigl(f(-f(x))\\bigr)=f(-x)\\quad\\Longrightarrow\\quad\n-f(x)=f(-x).\n\\]\n\nThus  \n\n\\[\n\\boxed{\\,f(-x)=-f(x)\\quad\\forall x.\\,}\\tag{4}\n\\]\n\nNow put $x\\mapsto f(x)$ in (4):\n\n\\[\nf\\bigl(-f(f(x))\\bigr)=-f(f(x)).\n\\]\n\nBut with (3) the left\u2013hand side equals $-\\,f(x)$, so we get  \n\n\\[\n-\\,f(x)=-f(f(x))\\;\\Longrightarrow\\;\n\\boxed{\\,f(f(x))=x\\quad\\forall x.\\,}\\tag{5}\n\\]\n\nTherefore $f$ is an involution and bijective.\n\n--------------------------------------------------------------------\n5.  Additivity of $f$\n\nLet $x,y$ be arbitrary.  \nBecause $f$ is onto, pick $z$ with $f(z)=y$ and apply $P(x,z)$.\n\n\u2022 If $(\\text A)$ holds,  \n\n\\[\nf(x+y)=f(x)+z. \\tag{6}\n\\]\n\n\u2022 If $(\\text B)$ holds,  \n\n\\[\nf\\bigl(f(x)+z\\bigr)=x+y.\n\\]\nUsing (5) and $z=f(y)$ this becomes  \n\n\\[\nf(x+y)=f(x)+f(y). \\tag{7}\n\\]\n\nIn case (6) we again use $z=f(y)$ (because $f$ is involutive) and get\nthe same relation (7).\nHence  \n\n\\[\n\\boxed{\\,f(x+y)=f(x)+f(y)\\quad\\forall x,y.\\,}\\tag{8}\n\\]\n\nSo $f$ is additive on $\\Bbb Q$; therefore there exists a constant\n$k\\in\\Bbb Q$ with  \n\n\\[\nf(x)=k\\,x\\quad\\forall x. \\tag{9}\n\\]\n\n--------------------------------------------------------------------\n6.  Determination of the constant $k$\n\nPutting (9) in the involution property (5) gives $k^{2}=1$, hence\n$k=\\pm1$.  \nThus the only aquaesulian functions are\n\n\\[\nf(x)=x\\qquad\\text{and}\\qquad f(x)=-x\\qquad(x\\in\\Bbb Q). \\tag{10}\n\\]\n\n--------------------------------------------------------------------\n7.  The values $f(r)+f(-r)$\n\nFor both functions in (10)\n\n\\[\nf(r)+f(-r)=\\pm r\\mp r=0\\qquad\\text{for every }r\\in\\Bbb Q.\n\\]\n\nSo every aquaesulian function yields exactly one (and the same)\nrational number, namely $0$, of the form $f(r)+f(-r)$.\n\nConsequently there is a universal bound $c=1$, and no smaller integer\nis possible.  \n\n--------------------------------------------------------------------\nAnswer.  \nThe smallest integer with the required property is  \n\n\\[\n\\boxed{c=1}.\n\\]"}
