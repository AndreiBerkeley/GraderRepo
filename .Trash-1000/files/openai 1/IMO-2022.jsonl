{"id": "imo-2022-q1", "solution": "Let's denote the sequence of coins as \\( S = s_1s_2\\ldots s_{2n} \\), where \\( s_i \\) is either \\( A \\) or \\( B \\) for \\( i = 1, 2, \\ldots, 2n \\). We will consider the following cases:\n\n1. If \\( S \\) has no chain of length \\( k \\) or longer, then the process will not change the order of the coins. Thus, the leftmost \\( n \\) coins will all be of the same type if and only if the first \\( n \\) coins are all of the same type. This implies that \\( s_1 = s_2 = \\ldots = s_n \\).\n\n2. If \\( S \\) has a chain of length \\( k \\) or longer, then the process will move all coins in that chain to the left end of the row. Let \\( m \\) be the length of the longest chain containing the \\( k \\)th coin from the left. Then, the process will change the order of the coins such that the first \\( m \\) coins are all of the same type. This implies that \\( s_1 = s_2 = \\ldots = s_m \\).\n\nNow, let's analyze the possible values of \\( m \\) for a given \\( k \\):\n\n- If \\( k \\leq n \\), then the longest chain containing the \\( k \\)th coin from the left is of length \\( k \\). Thus, \\( m = k \\).\n- If \\( n < k \\leq 2n \\), then the longest chain containing the \\( k \\)th coin from the left is of length \\( 2n - k + 1 \\). Thus, \\( m = 2n - k + 1 \\).\n\nTherefore, the leftmost \\( n \\) coins will all be of the same type if and only if \\( s_1 = s_2 = \\ldots = s_m \\), where \\( m = \\min(k, 2n - k + 1) \\).\n\nHence, the pairs \\( (n, k) \\) such that for every initial ordering, at some moment during the process, the leftmost \\( n \\) coins will all be of the same type are given by:\n\\[ (n, k) = \\{(n, k) \\mid 1 \\leq k \\leq n \\text{ or } n < k \\leq 2n\\} \\]"}
{"id": "imo-2022-q2", "solution": "Let $P(x,y)$ be the assertion $xf(y) + yf(x) \\leq 2$.\n\nFrom $P(1,1)$, we have $f(1)^2 \\leq 1$. Since $f$ is a function from positive reals to positive reals, we have $f(1) \\leq 1$.\n\nNow, from $P(x,1)$, we have $xf(1) + f(x) \\leq 2$. Since $f(1) \\leq 1$, we have $f(x) \\leq 2 - x$ for all $x \\in \\mathbb{R}^+$.\n\nNow, let's show that $f(x) \\geq 2 - x$ for all $x \\in \\mathbb{R}^+$. Assume there exists $a \\in \\mathbb{R}^+$ such that $f(a) < 2 - a$. Then, for $x = a$ and $y = \\frac{2-a}{2-f(a)}$, we have\n\\begin{align*}\naf\\left(\\frac{2-a}{2-f(a)}\\right) + \\frac{2-a}{2-f(a)}f(a) &\\leq 2 \\\\\naf\\left(\\frac{2-a}{2-f(a)}\\right) + \\frac{2-a}{2-f(a)}f(a) &< 2,\n\\end{align*}\nwhich contradicts the fact that there is exactly one $y$ satisfying the inequality for each $x$. Hence, $f(x) \\geq 2 - x$ for all $x \\in \\mathbb{R}^+$.\n\nTherefore, the only function satisfying the given condition is $f(x) = 2 - x$ for all $x \\in \\mathbb{R}^+$."}
{"id": "imo-2022-q3", "solution": "Let $n$ be the number of elements in the set $S$. We will prove that there is at most one way to place the elements of $S$ around the circle such that the given condition is satisfied.\n\nLet $p_1, p_2, \\ldots, p_n$ be the odd prime numbers in $S$. We will show that the only possible way to place these primes around the circle is such that $p_i$ is adjacent to $p_{i+1}$ for $1 \\leq i \\leq n$.\n\nSuppose there exists a valid arrangement of the primes around the circle such that $p_i$ is not adjacent to $p_{i+1}$ for some $i$. Let $p_i$ and $p_{i+1}$ be separated by $m$ other primes. Then, the product of $p_i$ and $p_{i+1}$ must be of the form $x^2 + x + k$ for some positive integer $x$. Since $p_i$ and $p_{i+1}$ are primes, their product is $p_ip_{i+1}$. Thus, we have $p_ip_{i+1} = x^2 + x + k$.\n\nNow, consider the product of $p_i$ with the prime immediately following $p_{i+1}$ in the circle. This product must also be of the form $x^2 + x + k$. However, the prime immediately following $p_{i+1}$ is $p_{i+2}$, and $p_ip_{i+2}$ is not equal to $x^2 + x + k$ since $p_i$ and $p_{i+2}$ are not adjacent in the circle. This leads to a contradiction, and hence, the assumption that $p_i$ is not adjacent to $p_{i+1}$ must be false.\n\nTherefore, the only valid arrangement of the primes around the circle is such that $p_i$ is adjacent to $p_{i+1}$ for all $1 \\leq i \\leq n$. This unique arrangement is obtained by placing the primes in a cyclic order around the circle.\n\nHence, there is at most one way (up to rotation and reflection) to place the elements of $S$ around the circle such that the product of any two neighbors is of the form $x^2 + x + k$ for some positive integer $x$."}
{"id": "imo-2022-q4", "solution": "Let \\(O\\) be the intersection point of lines \\(AD\\) and \\(BE\\). Since \\(BC=DE\\), we have \\(BO=OE\\). Also, since \\(TB=TD\\) and \\(\\angle ABT = \\angle TEA\\), we have \\(\\triangle TBO \\cong \\triangle TEO\\) by SAS congruence. Thus, \\(\\angle TBO = \\angle TOE\\).\n\nNow, since \\(AB \\parallel RS\\), we have \\(\\angle ABR = \\angle RSE\\). Also, since \\(AB \\parallel RS\\) and \\(AE \\parallel PQ\\), we have \\(\\angle ABR = \\angle RSE = \\angle QCT\\). Therefore, \\(\\angle RSE = \\angle QCT\\).\n\nSince \\(\\angle TBO = \\angle TOE\\), we have \\(\\angle TBP = \\angle TEP\\). Also, since \\(\\angle TBP = \\angle TEP\\) and \\(\\angle TBC = \\angle TED\\), we have \\(\\angle PBC = \\angle EDC\\). Therefore, \\(\\angle PBC = \\angle EDC\\).\n\nNow, we have\n\\[\\angle PSR = \\angle RSE + \\angle PBC = \\angle QCT + \\angle EDC = \\angle QCD.\\]\nAlso, we have\n\\[\\angle PSQ = \\angle QCT + \\angle TCB = \\angle QCT + \\angle TBC = \\angle QCD.\\]\nTherefore, \\(\\angle PSR = \\angle PSQ\\), which implies that the points \\(P\\), \\(S\\), \\(Q\\), \\(R\\) lie on a circle."}
{"id": "imo-2022-q5", "solution": "First, we note that if \\( b = 1 \\), then the equation becomes \\( a^p = 2 + p \\). Since \\( p \\) is prime and greater than 2, we have \\( a^p \\) is odd, which implies that \\( a \\) is odd. However, if \\( a \\) is odd, then \\( a^p \\) is also odd, which contradicts the fact that \\( 2 + p \\) is even. Therefore, \\( b \\) cannot be 1.\n\nNext, we consider the case where \\( b = 2 \\). The equation becomes \\( a^p = 2! + p = 2 + p \\). Since \\( p \\) is prime and greater than 2, we have \\( a^p \\) is odd, which implies that \\( a \\) is odd. However, if \\( a \\) is odd, then \\( a^p \\) is also odd, which contradicts the fact that \\( 2 + p \\) is even. Therefore, \\( b \\) cannot be 2.\n\nNow, we consider the case where \\( b \\geq 3 \\). We rewrite the equation as\n\\[ a^p = b! + p. \\]\n\nSince \\( p \\) is prime, we have \\( p \\) does not divide \\( b! \\). Therefore, \\( p \\) divides \\( a^p \\), which implies that \\( p \\) divides \\( a \\) by Fermat's Little Theorem. Let \\( a = kp \\) for some positive integer \\( k \\).\n\nSubstitute \\( a = kp \\) into the equation, we get\n\\[ (kp)^p = b! + p. \\]\n\nExpanding the left-hand side using the binomial theorem, we have\n\\[ k^p p^p = b! + p. \\]\n\nSince \\( b! \\) is divisible by all positive integers less than or equal to \\( b \\), we have \\( b! + p \\equiv 1 \\pmod{p} \\). Therefore, \\( k^p \\equiv 1 \\pmod{p} \\).\n\nBy Fermat's Little Theorem, we have \\( k^{p-1} \\equiv 1 \\pmod{p} \\). Since \\( p \\) is prime, \\( p-1 \\) is not divisible by \\( p \\), which implies that \\( k \\equiv 1 \\pmod{p} \\).\n\nThus, we have \\( a = kp = p + mp \\) for some positive integer \\( m \\). Substitute this back into the original equation, we get\n\\[ (p + mp)^p = b! + p. \\]\n\nExpanding the left-hand side using the binomial theorem, we have\n\\[ p^p + \\binom{p}{1}mp^{p-1} + \\binom{p}{2}m^2p^{p-2} + \\ldots + m^p p^p = b! + p. \\]\n\nSince \\( b! \\) is divisible by all positive integers less than or equal to \\( b \\), we have\n\\[ p^p + \\binom{p}{1}mp^{p-1} \\equiv 1 \\pmod{p}. \\]\n\nThis implies that\n\\[ p^p \\equiv 1 \\pmod{p}. \\]\n\nBy Fermat's Little Theorem, we have \\( p^{p-1} \\equiv 1 \\pmod{p} \\). Since \\( p \\) is prime, \\( p-1 \\) is not divisible by \\( p \\), which implies that \\( p \\equiv 1 \\pmod{p} \\). This is only possible if \\( p = 1 \\).\n\nTherefore, the only solution to the given equation is \\( (a,b,p) = (2,2,2) \\)."}
{"id": "imo-2022-q6", "solution": "Let's prove that there exists an uphill path in any Nordic square.\n\nConsider the Nordic square as a graph where each cell is a vertex and two vertices are connected by an edge if and only if they are orthogonally adjacent. Since the Nordic square is an $n \\times n$ board, it has $n^2$ vertices.\n\nNow, let's define a directed graph $G$ as follows:\n- The vertices of $G$ are the cells of the Nordic square.\n- For each pair of vertices $u$ and $v$ in $G$, there is a directed edge from $u$ to $v$ if and only if the number in cell $u$ is less than the number in cell $v$.\n\nSince the numbers in the Nordic square are distinct and range from $1$ to $n^2$, there is a unique directed edge between any two vertices in $G$.\n\nNow, we claim that there exists a vertex in $G$ with out-degree $0$.  \nSuppose, for the sake of contradiction, that every vertex in $G$ has a directed edge leaving it. Then, starting from any vertex, we can keep moving along the directed edges to get a cycle. However, this is impossible since the numbers in the cells are distinct. Hence, there must be a vertex with out-degree $0$.\n\nLet $v$ be a vertex in $G$ with out-degree $0$. This means that $v$ is a valley in the Nordic square.  \nStarting from $v$, we can construct an uphill path by repeatedly moving to a neighbor with a larger number. Since $v$ has out-degree $0$, this process must terminate at some point, and we obtain an uphill path.\n\nTherefore, we have shown that there exists an uphill path in any Nordic square."}
