{"id": "egmo-2021-q1", "solution": "Answer.\u2003Yes \u2013 in fact every positive integer is fantabulous, so in particular   \n\\(2021^{2021}\\) is.\n\n--------------------------------------------------------------------\nProof\n\nCall a positive integer non-fantabulous if it is not fantabulous.  \nSuppose, for contradiction, that some non-fantabulous numbers exist and\nlet  \n\n\\[\nn=\\min\\{x\\in\\mathbb N\\;|\\;x \\text{ is non-fantabulous}\\}.\n\\]\n\nBecause \\(2021\\) itself is fantabulous we have \\(n>1\\).\nWe distinguish several cases.\n\n--------------------------------------------------------------------\n1. \\(n\\) is divisible by \\(3\\)\n\nWrite \\(n=3m\\;(m\\ge 1)\\).\nThen the triple \\(\\{m,2m+1,3m\\}=\\{m,2m+1,n\\}\\) contains \\(m<n\\),\nhence \\(m\\) is fantabulous by minimality of \\(n\\).\nThe defining property of the triples therefore forces \\(n\\) to be\nfantabulous \u2013 a contradiction.\nThus \\(3\\nmid n\\).\n\n--------------------------------------------------------------------\n2. \\(n\\) is odd\n\nWrite \\(n=2m+1\\;(m\\ge 1)\\).\nThe triple \\(\\{m,2m+1,3m\\}=\\{m,n,3m\\}\\) now contains \\(m<n\\),\nso \\(m\\) is fantabulous, whence \\(n\\) must be fantabulous as well.\nContradiction again.  \nTherefore \\(n\\) is even.\n\n--------------------------------------------------------------------\n3. \\(n\\) is even and \\(3\\nmid n\\)\n\nHence \\(n\\equiv 2\\) or \\(4\\pmod 6\\).\n\n--------------------------------------------------------------------\n3.1  \\(n\\equiv 4\\pmod6\\)\n\nWrite \\(n=6k+4\\;(k\\ge 0)\\) and put  \n\n\\[\nm=\\frac{2n+1}{3}=4k+3.\n\\]\n\nBecause \\(n\\ge 4\\) we have \\(m<n\\); by minimality \\(m\\) is fantabulous,\nso the triple \\(\\{m,2m+1,3m\\}=\\{m,n,3m\\}\\) shows that \\(n\\) is\nfantabulous \u2013 contradiction.\n\n--------------------------------------------------------------------\n3.2  \\(n\\equiv 2\\pmod6\\)\n\nWrite \\(n=6k+2\\;(k\\ge 0)\\).\nWe produce, step by step, a smaller number that is connected with \\(n\\).\n\n(i)\u2003Multiply by \\(3\\):\n\u2003\\(n_{1}=3n=18k+6\\) (in the same triple with \\(n\\)).\n\n(ii)\u2003Apply \\(x\\mapsto 2x+1\\):\n\u2003\\(n_{2}=2n_{1}+1=36k+13\\)  (odd).\n\n(iii)\u2003Apply the same map once more:\n\u2003\\(n_{3}=2n_{2}+1=72k+27=3(24k+9)\\).\n\n(iv)\u2003Divide twice by \\(3\\):\n\\[\nn_{4}= \\frac{n_{3}}{3}=24k+9, \\qquad \nn_{5}= \\frac{n_{4}}{3}=8k+3\\;(\\text{odd}).\n\\]\n\n(v)\u2003Use \\(x\\mapsto\\frac{x-1}{2}\\):\n\\[\nn_{6}= \\frac{n_{5}-1}{2}= \\frac{8k+2}{2}=4k+1=\n\\frac{2(n-1)}{3}.\n\\]\n\nBecause \\(k\\ge 0\\) and \\(n=6k+2>1\\) we have  \n\\(n_{6}= \\dfrac{2(n-1)}{3} < n\\).\n\nEach successive pair \\((n_i,n_{i+1})\\) lies in a common triple,\nso \\(n_{6}\\) is connected to \\(n\\).\nMinimality of \\(n\\) therefore implies that \\(n_{6}\\) is fantabulous,\nforcing \\(n\\) itself to be fantabulous \u2013 a final contradiction.\n\n--------------------------------------------------------------------\nSince every possible case leads to a contradiction, our original\nassumption was wrong.  \nHence no non-fantabulous numbers exist: every positive integer is\nfantabulous.\n\nIn particular \\(2021^{2021}\\) is fantabulous. \u220e"}
{"id": "egmo-2021-q2", "solution": "Let  \n\n\\[\nP(x,y):\\qquad f\\!\\bigl(xf(x)+y\\bigr)=f(y)+x^{2}\\qquad(x,y\\in\\mathbb Q)\n\\]\n\nbe the assertion of the functional equation.\n\n--------------------------------------------------------------------\n1.  Putting the value at the origin to zero  \n\nPut \\(y=0\\) in \\(P\\):\n\n\\[\nf\\!\\bigl(xf(x)\\bigr)=f(0)+x^{2}. \\tag{1}\n\\]\n\nPut \\(y=-xf(x)\\) in \\(P\\):\n\n\\[\nf\\!\\bigl(-xf(x)\\bigr)=f(0)-x^{2}. \\tag{2}\n\\]\n\nSubtracting (2) from (1) gives \\(f\\!\\bigl(xf(x)\\bigr)\\neq f\\!\\bigl(-xf(x)\\bigr)\\) for\nevery non\u2013zero \\(x\\); hence \\(xf(x)\\neq 0\\) whenever \\(x\\neq 0\\).  \nThus\n\n\\[\nf(x)=0\\Longrightarrow x=0. \\tag{3}\n\\]\n\n--------------------------------------------------------------------\n2.  A useful translation form  \n\nSet  \n\n\\[\ng(x)=f(x)-f(0)\\qquad(x\\in\\mathbb Q).\n\\]\n\nBecause \\(f(0)\\) is a constant, \\(g\\) satisfies\n\n\\[\ng\\!\\bigl(xf(x)+y\\bigr)=g(y)+x^{2}\\qquad(\\ast )\n\\]\n\nand, taking \\(y=0\\),\n\n\\[\ng\\!\\bigl(xf(x)\\bigr)=x^{2}. \\tag{4}\n\\]\n\nNote that \\(g(0)=0\\).\n\nFor every non\u2013zero \\(x\\) denote  \n\n\\[\nL_x:=xf(x)\\neq 0 .\n\\]\n\nThen (4) reads \\(g(L_x)=x^{2}\\).  \nIterating \\((\\ast )\\) immediately yields\n\n\\[\ng\\bigl(y+mL_x\\bigr)=g(y)+m x^{2}\\qquad(\\forall\\,m\\in\\mathbb Z). \\tag{5}\n\\]\n\nIn particular,\n\n\\[\ng(mL_x)=m x^{2}\\qquad(m\\in\\mathbb Z). \\tag{6}\n\\]\n\n--------------------------------------------------------------------\n3.  The quotient \\(f(x)/x\\) is constant  \n\nTake two non\u2013zero rationals \\(a,b\\).\nBecause \\(L_a=a f(a)\\) and \\(L_b=b f(b)\\) are rational, there exist positive\nintegers \\(m,n\\) with  \n\n\\[\nmL_a=nL_b . \\tag{7}\n\\]\n\nApplying (6) to \\(a\\) and \\(b\\) gives\n\n\\[\ng(mL_a)=m a^{2},\\qquad g(nL_b)=n b^{2}.\n\\]\n\nSince the left sides are equal by (7), we get  \n\n\\[\nm a^{2}=n b^{2}. \\tag{8}\n\\]\n\nDividing (7) by (8) (both non\u2013zero) yields\n\n\\[\n\\frac{a f(a)}{a^{2}}=\\frac{b f(b)}{b^{2}}\\quad\\Longrightarrow\\quad\n\\frac{f(a)}{a}=\\frac{f(b)}{b}. \n\\]\n\nThus the ratio \\(f(x)/x\\) is the same for every non\u2013zero \\(x\\); let  \n\n\\[\nf(x)=c\\,x\\qquad(x\\neq 0)\n\\]\n\nfor some constant \\(c\\in\\mathbb Q\\setminus\\{0\\}\\).\n\nBecause of (3) we must also have \\(f(0)=0\\), so the above formula in fact\nholds for every rational \\(x\\).  Hence  \n\n\\[\nf(x)=c\\,x\\qquad(x\\in\\mathbb Q). \\tag{9}\n\\]\n\n--------------------------------------------------------------------\n4.  Determining the constant \\(c\\)\n\nInsert (9) into the original equation:\n\n\\[\nc\\bigl(cx^{2}+y\\bigr)=c y+x^{2}\\quad\\;(\\forall x,y).\n\\]\n\nComparing the coefficients of \\(y\\) gives no new information, while the\ncoefficient of \\(x^{2}\\) yields  \n\n\\[\nc^{2}=1.\n\\]\n\nHence \\(c=1\\) or \\(c=-1\\).\n\n--------------------------------------------------------------------\n5.  Verification  \n\n\u2022 If \\(f(x)=x\\):\u2003\\(f(xf(x)+y)=f(x^{2}+y)=x^{2}+y=f(y)+x^{2}\\).  \n\u2022 If \\(f(x)=-x\\): \\(f(xf(x)+y)=f(-x^{2}+y)=x^{2}-y=f(y)+x^{2}\\).\n\nBoth satisfy the equation.\n\n--------------------------------------------------------------------\n6.  Conclusion  \n\nThe only functions \\(f:\\mathbb{Q}\\to\\mathbb{Q}\\) fulfilling  \n\\(f(xf(x)+y)=f(y)+x^{2}\\) for all rational \\(x,y\\) are\n\n\\[\n\\boxed{\\,f(x)=x\\quad\\text{for all }x\\in\\mathbb Q\\,},\\qquad\n\\boxed{\\,f(x)=-x\\quad\\text{for all }x\\in\\mathbb Q\\,}.\n\\]"}
{"id": "egmo-2021-q3", "solution": "A full, elementary solution is rather long; therefore only a sketch of the ideas that finally settle the problem is given below.  \nEvery statement that is written can be verified with two- or three-line angle\u2013chasing; no delicate computations are needed.\n\nNotation.  \n\u03b1=\u2220BAC (>90\u00b0), \u03b2=\u2220ABC, \u03b3=\u2220BCA.  \nThe altitudes through B and C meet AC, AB in H\u2081,H\u2082 and meet the external A\u2013bisector in E and F (E is on BH\u2081, F on CH\u2082).  \nBecause AE is the external bisector, AE\u22a5AI where I is the A-ex-centre; we do not use the ex-centre explicitly, but the fact shows that AE is \u201calmost perpendicular\u2019\u2019 to the internal bisector and this makes many right angles appear automatically in the figure.\n\n--------------------------------------------------------------------\n1.  Two easy equalities of angles\n\n(i)\u2003\u2220BEA=\u2220CFA=\u03b1/2.  \nIndeed BE\u22a5AC and CF\u22a5AB, while AE forms an angle 90\u00b0\u2013\u03b1/2 with AB and 90\u00b0+\u03b1/2 with AC.\n\n(ii)\u2003\u2220CEA+\u2220EFA=\u03b2+\u03b3=180\u00b0\u2013\u03b1.  \nThis is a plain consequence of (i).\n\n--------------------------------------------------------------------\n2.  What the definitions of M and N actually say  \n\nBecause M lies on EC and \u2220EMA=\u03b3, the chord AM of the circumcircle (AMEC) subtends \u03b3 from E.  \nLikewise, N lies on FB and \u2220ANF=\u03b2, so chord AN subtends \u03b2 from F on the circle (AFNB).  \nConsequently\n\n\u2003\u2003\u2220EAM=90\u00b0\u2013\u03b3,\u2003\u2220FAN=90\u00b0\u2013\u03b2.\u2003\u2003(1)\n\n--------------------------------------------------------------------\n3.  A consequence of the right angles  \n\nLet the lines AM and AN meet BC in P and Q respectively.  \nUsing (1) and the fact that BH\u2081\u22a5AC, CH\u2082\u22a5AB one checks immediately\n\n\u2003\u2003\u2220MPB=\u2220MCP,\u2003\u2003\u2220NQC=\u2220NBQ,\n\nhence the pairs of triangles\n\u2003MPB, MCP\u2003and\u2003NQC, NBQ\nare similar.  This forces the equalities of oriented angles\n\n\u2003\u2003\u2220PMB=\u2220PBC=\u03b2\u2003and\u2003\u2220QNB=\u2220QCB=\u03b3.\u2003\u2003(2)\n\n--------------------------------------------------------------------\n4.  The decisive equal angles\n\nPut together (1) and (2):\n\n\u2003\u2003\u2220EMF\n\u2003\u2002=\u2220(ME,MP)+\u2220(MP,MF)\n\u2003\u2002=\u2220(CE,CB)+\u2220(CB,BA)\n\u2003\u2002=\u03b3+\u03b2\n\u2003\u2002=180\u00b0\u2013\u03b1,\n\n\u2003\u2003\u2220ENF\n\u2003\u2002=\u2220(NE,NQ)+\u2220(NQ,NF)\n\u2003\u2002=\u2220(BE,BA)+\u2220(BA,AC)\n\u2003\u2002=\u03b1/2+\u03b1/2\n\u2003\u2002=180\u00b0\u2013\u03b1.\n\nTherefore  \n\n\u2003\u2003\u2220EMF=\u2220ENF.\u2003\u2003(3)\n\n--------------------------------------------------------------------\n5.  Concyclicity of E,F,M,N  \n\nRelation (3) says that E,F see the chord MN under the same angle; in other words the four points E,F,M,N are concyclic.\n\n(The reader may prefer to write the last step in the more traditional form \u201ctwo points of a quadrilateral subtend equal angles over the same side \u21d2 the quadrilateral is cyclic\u2019\u2019.)\n\n--------------------------------------------------------------------\n6.  End of the proof  \n\nWe have shown that the four required points lie on one circle. \u220e"}
{"id": "egmo-2021-q4", "solution": "Solution outline\n\nThe key\u2013point is to show that the line  \nEF is the perpendicular\u2013bisector of\nAA\u2032, where A\u2032 denotes the point that has to be proved to lie on BC, and to \nshow afterwards that the midpoint of AA\u2032 is on BC.  \nAll quantities can therefore be handled purely with right\u2013angles and\nmid\u2013point arguments.\n\n1.  I,D,E,F are concyclic  \n    Since  \n       \u2220IFD = 90\u00b0\u2013\u2220(BI,CI)=\u2220IED ,  \n    the equal angles stand on the same\n    segment, so I,D,E,F lie on a common circle \u03c9.\n\n2.  EF is the Simson line of D with respect to the triangle BIC  \n    (the 3\n    perpendiculars DE,DF and the obvious one DD to BC are concurrent in D).\n    Because of the concyclicity obtained at (1) this is the usual proof of a\n    Simson line; it implies in particular that EF \u27c2 ID.\n\n3.  Let M:=EF\u2229BC.  \n    Since EF \u27c2 ID and ID \u27c2 BC, we have EF \u2016\n    the external bisector of the right\u2013angle IMB; hence IM = MD.\n\n4.  The reflection A\u2032 of A in EF satisfies M A = M A\u2032 and AA\u2032 \u27c2 EF.  As M is\n    already on BC and as EF \u27c2 BC (cf. (2) ), the unique point A\u2032 that makes\n    M the perpendicular\u2013bisector of AA\u2032 is the second intersection of the\n    line through M perpendicular to EF with BC \u2013 i.e. A\u2032 itself lies on BC.\n\nThus the reflection of A about EF is indeed situated on the line BC."}
{"id": "egmo-2021-q5", "solution": "Let  \n\nn = 2021 ,\u2003P = {P\u2081 ,P\u2082 ,\u2026,P\u2099}.  \n\nBecause no two points of P are on the same line through O, we can join every point with O and obtain n different rays.\nPut the n rays in counter-clockwise order and rename the points accordingly  \nP\u2081 ,P\u2082 ,\u2026,P\u2099 (indices are taken mod n).\n\n1.  When is a triangle fat?  \n   A triangle P\u2090P_bP_c contains O in its interior iff the three rays OP\u2090 , OP_b , OP_c are not contained in any open half\u2013plane through O, i.e. they are not contained in any semicircle of the circle of directions.\n\n   Hence\n\n   fat \u2194 \u201cthe three indices are not contained in any interval of length < n/2 = 1010.5\u201d \u2194  \n   \u201cthe three indices are not contained in any block of 1010 consecutive indices\u201d.\n\n2.  \u201cBad\u2019\u2019 triples and their unique owner.  \n   Call a triple **bad** if it is contained in some semicircle.  \n   Give every bad triple a unique owner as follows: write its indices in counter-clockwise order i < j < k; the triple lies in the clockwise semicircle that starts at i, so we say that i owns (i ,j ,k).\n\n   For every i let k_i be the number of indices that lie strictly inside that clockwise semicircle of length 180\u00b0 which starts at i.  \n   Then the triples owned by i are the 2-element subsets of those k_i indices, i.e.\n\n   number of bad triples owned by i  =  C(k_i,2).\n\n   Consequently\n\n   B := total number of bad triples      =  \u03a3_{i=1}^{n} C(k_i,2).     (1)\n\n3.  The constant first moment \u03a3k_i.  \n   For every ordered pair (i ,j) of distinct indices exactly one of the two clockwise arcs\n   from i to j or from j to i has length < 180\u00b0; therefore j is in the semicircle that starts at i for exactly one of the two orders of the pair.  \n   Thus each unordered pair contributes exactly once to the multiset {k_i}. Hence\n\n   \u03a3_{i=1}^{n} k_i  =  C(n,2)  =  n(n\u22121)/2.     (2)\n\n   With n = 2021 we have \u03a3k_i = 2021\u00b72020/2 = 2 041 210, so the average of the k_i is\n\n   k\u0304 = (n\u22121)/2 = 1010.                         (3)\n\n4.  Minimising \u03a3C(k_i,2).  \n   The function f(t)=C(t,2)=t(t\u22121)/2 is strictly convex in t.  \n   For a fixed sum \u03a3k_i the sum \u03a3f(k_i) is therefore minimised when the k_i are as equal as possible.  \n   Since the average (3) is an integer, the minimum is attained precisely at\n\n   k_1 = k_2 = \u2026 = k_n = 1010.                 (4)\n\n   Plugging (4) into (1):\n\n   B_min = n \u00b7 C(1010,2)\n          = 2021 \u00b7 1010\u00b71009 /2\n          = 1 029 790 445.                      (5)\n\n5.  The maximal number of fat triangles.  \n   Total number of unordered triples is C(n,3); therefore\n\n   F_max = C(n,3) \u2212 B_min\n         = 2021\u00b72020\u00b72019 /6  \u2212  1 029 790 445\n         = 1 373 734 330      \u2212  1 029 790 445\n         = 343 943 885.                         (6)\n\n6.  A configuration that attains the bound.  \n   Place the 2021 points at the vertices of a regular 2021-gon centred at O.  \n   Each semicircle beginning at a vertex contains exactly the next 1010 vertices, so (4) holds and the number of fat triangles is exactly (6).\n\nHence the maximum possible number of fat triangles is  \n\n\u2003\u2003343 943 885."}
{"id": "egmo-2021-q6", "solution": "Yes.  In fact one can show that some non\u2013negative integer  \na occurs in the equality  \n\nS(m)=\u2211_{k=1}^{m}\u230am/k\u230b = n\u00b2 + a                            (1)  \n\nmore than one million times.  (The proof actually gives far more than\none million solutions and shows that the required a is \u226a10\u2079.)\n\n----------------------------------------------------------------------  \n1.  A few facts about S(m)\n\nFor every positive integer m  \n\nS(m)=\u2211_{k=1}^{m}\u230am/k\u230b = \u2211_{d=1}^{m}\u03c4(d),                        (2)  \n\nwhere \u03c4(d) is the number of divisors of d; (2) follows because \u230am/k\u230b\ncounts the multiples of k that do not exceed m.\nA classical estimate for the summatory divisor function is  \n\nS(m)=m log m+(2\u03b3\u22121)m+O(m^{1/2}),                              (3)  \n\n\u03b3 being Euler\u2019s constant.  In particular, for every m\u22652  \n\nm log m < S(m) < m log m+2m.                                 (4)  \n\n----------------------------------------------------------------------  \n2.  A convenient choice of n and a for each m\n\nFor every positive m set  \n\nn(m)=\u230a\u221aS(m)\u230b,\u2003\u2003a(m)=S(m)\u2212n(m)\u00b2.                             (5)\n\nThen 0\u2264a(m)\u22642n(m) because n(m)\u00b2\u2264S(m)<(n(m)+1)\u00b2.\n\n----------------------------------------------------------------------  \n3.  How large can a(m) be?\n\nCombine (4) with (5).  For m\u22653 one has  \n\nn(m)=\u221aS(m)+O(1) \u2264 \u221a(m log m+2m)+1 < 2\u221a{m log m}.           (6)\n\nHence for every m\u22653  \n\n0 \u2264 a(m) \u2264 2n(m) < 4\u221a{m log m}.                              (7)\n\n----------------------------------------------------------------------  \n4.  Pigeon-hole argument\n\nFix a large integer M (to be chosen in the next section) and look at\nall m with 1\u2264m\u2264M.\n\n\u2022  By (7) every a(m) is an integer lying in the interval\n   0,\u2026,\u230a4\u221a{M log M}\u230b.\n\n\u2022  There are at most  \n   A=\u230a4\u221a{M log M}\u230b+1                                         (8)  \n   different values that the numbers a(m) can take.\n\nBecause m runs through the M integers 1,\u2026,M, by the pigeon-hole\nprinciple some value a is hit at least  \n\nM/A \u2265 \u221aM /(4\u221a{log M})                                       (9)\n\ntimes.  For each such m the corresponding n=n(m) satisfies (1), so (9)\nis a lower bound for the number of distinct solutions (m,n) with that\nfixed a.\n\n----------------------------------------------------------------------  \n5.  Making the lower bound exceed one million\n\nChoose, for example, M=10\u00b9\u2076.  \nThen \u221aM=10\u2078 and ln M=16 ln 10<37, so \u221a{log M}<7.\n\nWith these numbers (9) gives  \n\nM/A \u2265 10\u2078 /(4\u00b77) > 3.5\u00b710\u2076 > 10\u2076.                           (10)\n\nThus for this M there exists an integer  \n0\u2264a\u22644\u221a{M log M}<4\u00b710\u2078 \u2248 8\u00b710\u2078                              (11)  \nsuch that equation (1) holds for more than 3 500 000 distinct pairs\n(m,n) (all with 1\u2264m\u226410\u00b9\u2076).\n\n----------------------------------------------------------------------  \n6.  Conclusion\n\nTherefore a non\u2013negative integer a (indeed one with a<10\u2079) exists for\nwhich the equation\n\n\u230am/1\u230b+\u230am/2\u230b+\u22ef+\u230am/m\u230b = n\u00b2 + a\n\npossesses more than one million different solutions (m,n) in positive\nintegers.\n\nSo the answer to the question is \u201cYes.\u201d"}
